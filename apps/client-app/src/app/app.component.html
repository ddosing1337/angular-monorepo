<div class="sidebar border-r-2 border-gray-200 p-1">
  <ui-list
    class="w-full"
    [options]="layers"
    [optionTemplate]="layerTemplate"
  ></ui-list>
  <ui-button class="w-full" (click)="addLayerActive.set(true)"
    >Add layer</ui-button
  >
</div>
<div class="main flex flex-col h-full w-full">
  @if (layerEditActive()) {
  <div
    class="layer-edit-bar flex flex-row items-center p-1 justify-between h-16 border-b-2 border-gray-200"
  >
    <ui-select
      [options]="layerEditOptions"
      placeholder="Select option"
      [(selected)]="selectedEditOption"
      class="w-40 block"
    ></ui-select>
    <div class="flex flex-row gap-1">
      <ui-button (click)="saveLayer()" class="w-16">Save</ui-button>
      <ui-button (click)="cancelLayerEdit()" class="w-16">Cancel</ui-button>
    </div>
  </div>
  }
  <!-- <ui-select
      [options]="layerEditOptions"
      placeholder="Select option"
      [(selected)]="selectedEditOption"
      class="w-40 block"
    ></ui-select> -->
  <app-map class="flex-1"></app-map>
</div>

@if(addLayerActive()) {
<ui-modal [(isActive)]="addLayerActive">
  <div
    class="add-layer-modal-container flex flex-row gap-1 flex-wrap justify-evenly"
  >
    <ui-text-field
      placeholder="Name"
      [(value)]="newLayerName"
      class="w-full"
    ></ui-text-field>
    <ui-button
      [disabled]="!newLayerName()"
      (click)="addLayer()"
      class="w-1/4 block"
      >Add</ui-button
    >
    <ui-button (click)="addLayerActive.set(false)" class="w-1/4 block"
      >Cancel</ui-button
    >
  </div>
</ui-modal>
}

<ng-template #layerTemplate let-option>
  <button
    (click)="selectLayer(option)"
    [ngClass]="{
      'border-blue-700 text-blue-700': selectedLayer() === option,
      'border-gray-200': selectedLayer() !== option
    }"
    class="flex flex-column flex-wrap justify-evenly w-full text-sm font-medium border-2 rounded-sm p-1 cursor-pointer"
  >
    <div class="w-full">{{ option.get('name') }}</div>
    @if (option === selectedLayer()) {
    <ui-button class="block w-1/3" (click)="editLayer(option)">Edit</ui-button>
    <ui-button class="block w-1/3" (click)="deleteLayer(option)"
      >Delete</ui-button
    >
    }
  </button>
</ng-template>
